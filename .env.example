# ============================================================
# Backpack-MM-Simple 环境变量配置示例
# ============================================================
#
# 使用说明:
# 1. 复制此文件为 .env: cp .env.example .env
# 2. 填写相应的配置项
# 3. 建议使用密钥加密存储功能，详见 SECURITY_SETUP.md
#
# ============================================================

# ============================================================
# 🔐 安全配置 (新增)
# ============================================================

# 主密码 - 用于加密密钥库
# 重要: 至少16个字符，包含大小写字母、数字和特殊字符
# 示例: MyVeryStr0ng@Password!2024
MASTER_PASSWORD=

# Web管理后台认证
# 管理员用户名 (可选，默认为 admin)
ADMIN_USERNAME=admin

# 管理员密码 (必须设置，否则会生成随机密码)
# 重要: 使用强密码
ADMIN_PASSWORD=

# ============================================================
# 📊 Backpack Exchange (主要交易所)
# ============================================================

# Backpack API 凭证
# 获取方式: https://backpack.exchange/settings/api
BACKPACK_KEY=your_backpack_api_key
BACKPACK_SECRET=your_backpack_secret_key

# Backpack API 端点 (可选，使用默认值即可)
BASE_URL=https://api.backpack.work
BACKPACK_API_URL=https://api.backpack.exchange
BACKPACK_WS_URL=wss://ws.backpack.exchange

# WebSocket 代理 (可选，仅在需要代理时设置)
# WS 代理格式 http://user:pass@host:port/ 或者 http://host:port (若不需要則留空或移除)
BACKPACK_PROXY_WEBSOCKET=

# API 版本和窗口 (可选)
BACKPACK_API_VERSION=v1
BACKPACK_DEFAULT_WINDOW=5000

# ============================================================
# 🌟 Aster Exchange
# ============================================================

# Aster API 凭证
ASTER_API_KEY=your_aster_api_key
ASTER_SECRET_KEY=your_aster_secret_key

# Aster API 端点 (可选)
ASTER_BASE_URL=https://api.aster.exchange

# WebSocket 代理 (可选)
ASTER_PROXY_WEBSOCKET=

# ============================================================
# 🔷 Paradex Exchange (StarkNet)
# ============================================================

# Paradex 使用 StarkNet 账户认证
# 注意: Paradex 不使用传统的 API Key，而是使用 StarkNet 私钥
# 需先登入 Paradex 使用 Paradex 地址與私鑰

# StarkNet 私钥 (必须)
# 格式: 0x开头的64位十六进制字符串
PARADEX_PRIVATE_KEY=your_paradex_private_key

# StarkNet 账户地址 (必须)
# 格式: 0x开头的64位十六进制字符串
PARADEX_ACCOUNT_ADDRESS=your_paradex_account_address

# Paradex API 端点 (可选)
PARADEX_BASE_URL=https://api.prod.paradex.trade/v1

# WebSocket 代理 (可选)
# WS 代理格式 http://user:pass@host:port/ 或者 http://host:port (若不需要則留空或移除)
PARADEX_PROXY_WEBSOCKET=

# JWT 签名设置 (可选)
PARADEX_SIGNATURE_TTL_SECONDS=1800
PARADEX_JWT_REFRESH_BUFFER=120

# ============================================================
# ⚡ Lighter Exchange
# ============================================================

# Lighter 私钥 (必须)
# 格式: 64或80位十六进制字符串
LIGHTER_PRIVATE_KEY=your_private_key

# Lighter 公钥 (可选，某些操作需要)
LIGHTER_PUBLIC_KEY=your_public_key

# API Key 索引 (可选，默认为0)
LIGHTER_API_KEY_INDEX=0

# 账户地址 (如果不设置 LIGHTER_ACCOUNT_INDEX 则必须)
# 格式: 以太坊地址
LIGHTER_ADDRESS=your_wallet_address

# 账户索引 (可选，如果设置了则优先使用)
# 获取方式: https://mainnet.zklighter.elliot.ai/api/v1/account?by=l1_address&value=你的钱包地址
# 在返回结果中查找 "account_index"
LIGHTER_ACCOUNT_INDEX=

# Lighter API 端点 (可选)
LIGHTER_BASE_URL=https://mainnet.zklighter.elliot.ai

# Chain ID (可选)
LIGHTER_CHAIN_ID=

# WebSocket 代理 (可选)
LIGHTER_PROXY_WEBSOCKET=
LIGHTER_WS_PROXY=

# ============================================================
# 📁 数据库和日志配置
# ============================================================

# 数据库路径
DB_PATH=orders.db

# 是否启用数据库 (0=禁用, 1=启用)
# ENABLE_DATABASE=1  # 啟用資料庫寫入 (預設0關閉)
ENABLE_DATABASE=1

# 日志文件路径
LOG_FILE=market_maker.log

# ============================================================
# 🌐 通用代理配置
# ============================================================

# 通用 WebSocket 代理 (所有交易所)
# 格式: socks5://127.0.0.1:1080 或 http://127.0.0.1:8080
PROXY_WEBSOCKET=

# HTTP 代理 (可选)
HTTP_PROXY=
HTTPS_PROXY=

# ============================================================
# 📈 策略默认参数 (可选)
# ============================================================

# 以下参数可以在命令行或Web界面中覆盖

# 默认交易对
DEFAULT_SYMBOL=SOL_USDC

# 默认价差 (%)
DEFAULT_SPREAD=0.5

# 默认订单数量
DEFAULT_QUANTITY=0.1

# 默认最大订单数
DEFAULT_MAX_ORDERS=3

# 永续合约默认参数
DEFAULT_TARGET_POSITION=1.0
DEFAULT_MAX_POSITION=5.0
DEFAULT_POSITION_THRESHOLD=0.1
DEFAULT_INVENTORY_SKEW=0.002

# 止损止盈默认值 (USDC)
DEFAULT_STOP_LOSS=100
DEFAULT_TAKE_PROFIT=200

# 滑点保护默认值 (基点，1bp = 0.01%)
DEFAULT_MAX_SLIPPAGE_BPS=50

# ============================================================
# 🔧 高级配置 / Web 服务器配置
# ============================================================

# Python 日志级别 (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Web 服务器主机 (0.0.0.0 允许外部访问，127.0.0.1 仅本地)
WEB_HOST=127.0.0.1

# Web 服务器端口 (如果端口被占用，会自动在 5001-6000 范围内寻找可用端口)
WEB_PORT=5000

# 调试模式 (true 开启，false 关闭)
WEB_DEBUG=false

# Token 过期时间 (小时)
TOKEN_EXPIRY_HOURS=24

# ============================================================
# 📝 使用示例
# ============================================================
#
# 基础配置 (最小化):
# 1. 设置 MASTER_PASSWORD
# 2. 设置 ADMIN_PASSWORD
# 3. 设置交易所 API 凭证 (如 BACKPACK_KEY 和 BACKPACK_SECRET)
#
# 推荐配置 (使用加密存储):
# 1. 设置 MASTER_PASSWORD 和 ADMIN_PASSWORD
# 2. 临时设置交易所 API 凭证
# 3. 运行: python security/encryption.py migrate
# 4. 删除或注释掉明文 API 凭证
# 5. 使用加密存储运行程序
#
# ============================================================

# ============================================================
# ⚠️ 安全提醒
# ============================================================
#
# 1. 永远不要将 .env 文件提交到 Git
# 2. 使用强密码 (至少16个字符)
# 3. 定期更换密码和 API 密钥
# 4. 生产环境建议使用密钥加密存储
# 5. 备份 .keystore 文件到安全位置
# 6. 使用 HTTPS 部署 Web 服务器
# 7. 限制 API 密钥权限 (仅交易，不要提现)
#
# 详细安全指南: 查看 SECURITY_ANALYSIS.md
#
# ============================================================
